:root{
  --bg:#0c0f14; --panel:#121621; --card:#171c29; --muted:#9aa3b2; --text:#e9edf3;
  --accent:#6aa1ff; --accent-2:#a36aff; --ok:#4cc38a; --warn:#f5bd49; --err:#ff6b6b;
  --border:#1f2636; --shadow:0 6px 24px rgba(0,0,0,.25);
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;background:linear-gradient(180deg,#0b0f16,#0d111a);
  color:var(--text);font:14px/1.4 system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
}
header.header{
  display:flex;align-items:center;justify-content:space-between;padding:16px 20px;border-bottom:1px solid var(--border);
  background:rgba(0,0,0,.25);backdrop-filter:blur(6px);position:sticky;top:0;z-index:10;
}
header .brand{display:flex;align-items:baseline;gap:10px}
header h1{margin:0;font-size:20px}
header .sub{color:var(--muted)}
.btn{border:1px solid var(--border);background:#1a2233;color:var(--text);padding:8px 12px;border-radius:10px;cursor:pointer;box-shadow:var(--shadow)}
.btn.primary{background:linear-gradient(135deg,var(--accent),var(--accent-2));border:none}
.btn.secondary{background:#20283a}
.btn:disabled{opacity:.6;cursor:not-allowed}
.status{padding:4px 8px;border-radius:999px;background:#1a2233;border:1px solid var(--border)}
.status.ok{background:#13351f;color:#c3f2d8;border-color:#245e3f}
.status.warn{background:#3a2c06;color:#ffe7a2;border-color:#6b4f0a}
.status.err{background:#3a1414;color:#ffcaca;border-color:#7a2d2d}
.tabs{display:flex;gap:6px;padding:10px 20px;border-bottom:1px solid var(--border)}
.tab{background:#1a2233;border:1px solid var(--border);color:var(--text);padding:8px 12px;border-radius:10px;cursor:pointer}
.tab.active{background:linear-gradient(135deg,#2a3755,#232c43)}
main{padding:20px;display:grid;gap:18px}
.tabPanel{display:none}
.tabPanel.active{display:block}
.card,.panel{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:16px;box-shadow:var(--shadow)}
.formGrid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:12px;margin-top:10px}
.formGrid label{display:flex;flex-direction:column;gap:6px}
.formGrid input[type="number"], .formGrid input[type="text"]{background:#101521;border:1px solid var(--border);border-radius:10px;color:var(--text);padding:10px}
.switchRow{display:flex;align-items:center;gap:10px}
.actions{margin-top:12px}
.fileDrop{display:flex;justify-content:center;align-items:center;height:64px;border:1px dashed var(--border);border-radius:12px;background:#121729;color:var(--muted);cursor:pointer}
.fileDrop input{display:none}
.fileDrop.small{height:48px}
.alert{margin-top:10px;padding:8px 10px;border-radius:10px;border:1px solid var(--border);display:block}
.alert.ok{background:#123522;color:#c1f1d9;border-color:#1f6946}
.alert.warn{background:#372e14;color:#ffeab0;border-color:#6e5a15}
.alert.err{background:#372020;color:#ffd5d5;border-color:#6e2a2a}
.muted{color:var(--muted)}
.logsHeader{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}
.logStream{min-height:160px;max-height:360px;overflow:auto;background:#0e1320;border:1px solid var(--border);border-radius:10px;padding:12px}
.mapWrap{display:grid;grid-template-columns:1fr 320px;gap:12px}
#map{height:560px;border-radius:12px;border:1px solid var(--border);overflow:hidden}
.mapPanel{background:#13192a;border:1px solid var(--border);border-radius:12px;padding:12px}
.layerList{display:flex;flex-direction:column;gap:6px;max-height:220px;overflow:auto}
.layerItem{display:flex;align-items:center;justify-content:space-between;background:#101521;border:1px solid var(--border);padding:6px 8px;border-radius:8px}
.divider{height:1px;background:var(--border);margin:10px 0}
.legend{margin-top:8px;color:var(--muted);font-size:13px}
.sym{display:inline-block;width:12px;height:12px;border-radius:2px;margin-right:6px}
.sym-point{background:#ffd166}
.sym-poly{background:#4cc38a}
.spinner{width:14px;height:14px;border:2px solid rgba(255,255,255,.35);border-top-color:#fff;border-radius:50%;display:inline-block;vertical-align:-2px;animation:spin .9s linear infinite;margin-right:8px}
.hidden{display:none}
@keyframes spin{to{transform:rotate(360deg)}}